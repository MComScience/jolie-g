"use strict";var $keys=[],$elmprint=$("button.on-print"),$selection=$("#tbproduct-selection"),$form=$("#form-print"),qrPrint={isEmpty:function(e){return void 0===e||null===e||0===e.length}};if($("#select-all").on("click",function(){var e=$("#tb-qrcode").DataTable(),t=e.rows({search:"applied"}).nodes();$('input[name="selection[]"]',t).prop("checked",this.checked);var n=e.$('input[type="checkbox"]').serialize();qrPrint.isEmpty(n)?$selection.val(null):(n=n.replace(new RegExp("selection%5B%5D=","g"),"")).split("&").length>1e3?(swal({type:"warning",title:"Oops!",text:"จำกัดการพิมพ์ 1000 รายการ/ครั้ง เนื่องจากมีข้อจำกัดด้านทรัพยากรของ Server และเพื่อไม่ให้ Server ทำงานหนักเเกินไป"}),$('input[name="selection[]"]',t).prop("checked",!1)):$selection.val(n)}),$("#tb-qrcode tbody").on("change",'input[type="checkbox"]',function(){var e=$("#tb-qrcode").DataTable(),t=e.$('input[type="checkbox"]').serialize();if(qrPrint.isEmpty(t))$selection.val(null);else if((t=t.replace(new RegExp("selection%5B%5D=","g"),"")).split("&").length>1e3){swal({type:"warning",title:"Oops!",text:"จำกัดการพิมพ์ 1000 รายการ/ครั้ง เนื่องจากมีข้อจำกัดด้านทรัพยากรของ Server และเพื่อไม่ให้ Server ทำงานหนักเเกินไป"});var n=e.rows({search:"applied"}).nodes();$('input[name="selection[]"]',n).prop("checked",!1)}else $selection.val(t)}),$form.on("beforeSubmit",function(){swal({type:"warning",title:"กรุณารอสักครู่...",showConfirmButton:!1})}),$elmprint.on("click",function(){var e=this,t=[];$("#tb-qrcode").DataTable().$('input[type="checkbox"]').each(function(){this.checked&&t.push(this.value)}),t.length>0&&swal({title:"ยืนยันการพิมพ์",text:t.length+" รายการ",type:"question",showCancelButton:!0,confirmButtonText:"พิมพ์",cancelButtonText:"ยกเลิก",allowEscapeKey:!1,allowOutsideClick:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(t,n){window.open(window.location.origin+$(e).data("url"),"myPrint","width=800, height=600").print(),t()})}}).then(function(e){e.value&&swal.close()})}),!qrPrint.isEmpty($selection.val())){var data=$selection.val().split("&");$.each(data,function(e,t){$("#tb-qrcode input#"+t).prop("checked",!0)})}